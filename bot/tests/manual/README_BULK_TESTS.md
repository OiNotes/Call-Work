# Bulk Operations Test Suite

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã AI —Å –≥—Ä—É–ø–ø–æ–π —Ç–æ–≤–∞—Ä–æ–≤.

## –û–ø–∏—Å–∞–Ω–∏–µ

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç 15 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã AI —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏:

- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ë–î (PostgreSQL)
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π AI (DeepSeek API)
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π Backend API
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î

## –ó–∞–ø—É—Å–∫

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
node bot/tests/manual/test-bulk-operations.js

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
./bot/tests/manual/test-bulk-operations.js
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Backend –∑–∞–ø—É—â–µ–Ω** –Ω–∞ `http://localhost:3000`
2. **PostgreSQL –∑–∞–ø—É—â–µ–Ω** –∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `DATABASE_URL`
3. **DeepSeek API –∫–ª—é—á** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env` (`DEEPSEEK_API_KEY`)
4. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã**: `npm install` –≤ `bot/`

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ì—Ä—É–ø–ø–∞ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤ (5 —Ç–µ—Å—Ç–æ–≤)

1. **"—Å–∫–∏–¥–∫–∞ 20% –Ω–∞ iPhone –∏ MacBook"**
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Å–∫–∏–¥–∫—É –∫ 2 —Ç–æ–≤–∞—Ä–∞–º
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: `discount_percentage = 20` –¥–ª—è –æ–±–æ–∏—Ö

2. **"—É—Å—Ç–∞–Ω–æ–≤–∏ —Ü–µ–Ω—É 100 –¥–ª—è iPhone, MacBook, iPad"**
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Ü–µ–Ω—É 3 —Ç–æ–≤–∞—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: `price = 100` –¥–ª—è –≤—Å–µ—Ö

3. **"–æ–±–Ω–æ–≤–∏ –æ—Å—Ç–∞—Ç–æ–∫ –¥–æ 50 –¥–ª—è iPhone –∏ Samsung"**
   - –û–±–Ω–æ–≤–ª—è–µ—Ç stock –¥–ª—è 2 —Ç–æ–≤–∞—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: `stock_quantity = 50`

4. **"–ø–µ—Ä–µ–∏–º–µ–Ω—É–π iPhone –≤ iPhone Pro –∏ MacBook –≤ MacBook Air"**
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç 2 —Ç–æ–≤–∞—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –Ω–æ–≤—ã–µ –∏–º–µ–Ω–∞ –≤ –ë–î

5. **"—Å–∫–∏–¥–∫–∞ 10% –Ω–∞ iPhone, 20% –Ω–∞ MacBook, 30% –Ω–∞ iPad"**
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ä–∞–∑–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –∫ 3 —Ç–æ–≤–∞—Ä–∞–º
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É

### –ì—Ä—É–ø–ø–∞ 2: –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤ (2 —Ç–µ—Å—Ç–∞)

6. **"—É–¥–∞–ª–∏ iPhone –∏ MacBook"**
   - –£–¥–∞–ª—è–µ—Ç 2 —Ç–æ–≤–∞—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: —Ç–æ–≤–∞—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –ë–î

7. **"—É–¥–∞–ª–∏ –≤—Å–µ –∫—Ä–æ–º–µ iPhone"**
   - –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∫—Ä–æ–º–µ –æ–¥–Ω–æ–≥–æ
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –æ—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ iPhone

### –ì—Ä—É–ø–ø–∞ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤ (2 —Ç–µ—Å—Ç–∞)

8. **"–¥–æ–±–∞–≤—å iPhone –∑–∞ $999, MacBook –∑–∞ $1999, iPad –∑–∞ $799"**
   - –î–æ–±–∞–≤–ª—è–µ—Ç 3 —Ç–æ–≤–∞—Ä–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –≤—Å–µ 3 —Ç–æ–≤–∞—Ä–∞ –≤ –ë–î —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏

9. **"–¥–æ–±–∞–≤—å 5 –Ω–∞—É—à–Ω–∏–∫–æ–≤ –ø–æ $50 –∫–∞–∂–¥—ã–µ"**
   - –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: —Å–æ–∑–¥–∞–Ω–æ ‚â•1 —Ç–æ–≤–∞—Ä —Å "–Ω–∞—É—à–Ω–∏–∫–∏" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏

### –ì—Ä—É–ø–ø–∞ 4: –°–º–µ—à–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (3 —Ç–µ—Å—Ç–∞)

10. **"–∏–∑–º–µ–Ω–∏ iPhone: —Ü–µ–Ω–∞ $899, —Å–∫–∏–¥–∫–∞ 10%, –æ—Å—Ç–∞—Ç–æ–∫ 100"**
    - –û–±–Ω–æ–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –≤—Å–µ –ø–æ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

11. **"—Å–∫–∏–¥–∫–∞ 20% –Ω–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã"**
    - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞—Å—Å–æ–≤—É—é —Å–∫–∏–¥–∫—É
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–º–µ—é—Ç discount = 20%

12. **"—É–±–µ—Ä–∏ —Å–∫–∏–¥–∫—É —Å iPhone –∏ MacBook"**
    - –£–¥–∞–ª—è–µ—Ç —Å–∫–∏–¥–∫—É —Å 2 —Ç–æ–≤–∞—Ä–æ–≤
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: discount_percentage = 0 –∏–ª–∏ NULL

### –ì—Ä—É–ø–ø–∞ 5: Edge cases (3 —Ç–µ—Å—Ç–∞)

13. **"—Å–∫–∏–¥–∫–∞ 20% –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–≤–∞—Ä"**
    - –ó–∞–ø—Ä–æ—Å —Å–∫–∏–¥–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–µ –Ω–∞–π–¥–µ–Ω"

14. **"–æ–±–Ω–æ–≤–∏ iPhone –∏ MacBook" (–±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —á—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å)**
    - –ù–µ–ø–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: AI –ø—Ä–æ—Å–∏—Ç —É—Ç–æ—á–Ω–∏—Ç—å —á—Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å

15. **"–¥–æ–±–∞–≤—å —Ç–æ–≤–∞—Ä —Å –ø—É—Å—Ç—ã–º –∏–º–µ–Ω–µ–º"**
    - –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä –±–µ–∑ –∏–º–µ–Ω–∏
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: AI –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å

## –í—ã–≤–æ–¥

```bash
üöÄ Bulk Operations Tests
============================================================

‚úÖ PASS: Test 1: –°–∫–∏–¥–∫–∞ 20% –Ω–∞ iPhone –∏ MacBook
‚úÖ PASS: Test 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω—ã 100 –¥–ª—è 3 —Ç–æ–≤–∞—Ä–æ–≤
‚úÖ PASS: Test 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞ –¥–æ 50 –¥–ª—è iPhone –∏ Samsung
...

============================================================

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   ‚úÖ Passed: 15/15
   ‚ùå Failed: 0/15
   üìà Success rate: 100%

üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ!
```

## Troubleshooting

### Backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
curl http://localhost:3000/api/health

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏
cd backend && npm run dev
```

### PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql $DATABASE_URL -c "SELECT 1"

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
cat bot/.env | grep DATABASE_URL
```

### DeepSeek API –æ—à–∏–±–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω
cat bot/.env | grep DEEPSEEK_API_KEY

# –ü—Ä–æ–≤–µ—Ä—å –ª–∏–º–∏—Ç—ã API
# Rate limit: ~60 requests/minute
```

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å timeout

- AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç ~2 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∫–æ–º–∞–Ω–¥—É
- –£–≤–µ–ª–∏—á—å `AI_DELAY` –≤ –∫–æ–¥–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç

```javascript
async function test16_your_test_name() {
  // 1. Setup
  await clearProducts();
  await addTestProduct('Product', 100);

  // 2. Execute
  const products = await getAllProducts();
  await sendAICommand('your command', products);

  // 3. Verify
  const product = await getProductByName('Product');
  const passed = /* your check */;

  // 4. Report
  formatResult('Test 16: Your test description', passed, error, details);
  return passed;
}
```

### –û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```javascript
// –í main() —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
const tests = [
  { name: 'Test 5', fn: test5_different_discounts_three_products }, // –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω
];
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// –í–∫–ª—é—á–∏—Ç—å debug –ª–æ–≥–∏
logger.level = 'debug'; // –í–º–µ—Å—Ç–æ 'warn'
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `test-all-functions.js` - –¢–µ—Å—Ç—ã –≤—Å–µ—Ö AI —Ñ—É–Ω–∫—Ü–∏–π (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ë–î)
- `testDeepSeekAI.js` - –ë–∞–∑–æ–≤—ã–µ AI —Ç–µ—Å—Ç—ã
- `test-clarification.js` - –¢–µ—Å—Ç—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
